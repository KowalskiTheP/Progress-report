!function(){function t(){var t=$("#js_cateWrap"),e=$("#js_cate_attr");e.height()>t.height()&&t.height(e.height())}function e(){var t=$("#js_cateWrap"),e=$("#js_cateWrapHeader");e.css({width:t.width(),left:t.css("marginLeft")})}function a(){var a=$("#js_cateWrap"),i=($("#js_cateWrapHeader"),$("#js_cate_attr")),o=$(window).height(),r=i.height(),s=(a.height(),$("div.footHelp").offset().top),n=i.offset().top;$(window).scroll(function(){var t=$(this);t.scrollTop()>a.offset().top?(e(),o>r&&(t.scrollTop()+r>=s?i.css({position:"absolute",top:"auto",bottom:"0px"}):i.css({position:"fixed",top:"10px",bottom:"auto"}))):o>r&&i.css({position:"absolute",top:"0"}),r>o&&(t.scrollTop()-n+o>=r?i.css({position:"fixed",top:"auto",bottom:"0"}):i.css({position:"absolute",top:"0",bottom:"auto"}),t.scrollTop()-n+o>=a.height()&&i.css({position:"absolute"}))}),$(window).resize(function(a){t(),e()})}t(),function(){var a=$("#js_cateWrap"),i=$("#js_show_saderBar"),o=$("#js_cate_attr");i.click(function(r){o.is(":hidden")?(o.show(),a.animate({marginLeft:"290px"},500,function(){e(),i.addClass("on"),$("#js_closeCateAttr").show(),o.removeClass("z-index-out"),t()})):(o.addClass("z-index-out"),a.animate({marginLeft:0},500,function(){i.removeClass("on"),e(),a.height("auto"),o.hide()}))})}(),$("div.price_range").find("input").keyup(function(t){var e=($("#low-price"),$("#high-price")),a=$(".range_link"),i=$(".range_tips"),o=$(this);isNaN(o.val())?(o.val(""),a.hide(),i.show()):isNaN($.trim(e.val()))&&"max"!=$.trim(e.val())?(a.hide(),i.show()):(a.show(),i.hide())}),$("#js_upRange").click(function(t){var e,a=$("#low-price"),i=$("#high-price"),o=$.trim(a.val()),r=$.trim(i.val());return r="max"==r?2e6:r,r>o&&(e=o,o=r,r=e,a.val(o),i.val(r)),window.location.href="",!1}),$("#js_upRange_reset").click(function(t){var e=$("#low-price"),a=$("#high-price");return e.val("").trigger("blur"),a.val("").trigger("blur"),$(".range_link").hide(),!1}),$("section.selectList").on("click","i.triangle",function(){var t=$(this).parents("section.selectList ");t.toggleClass("selectList_up").find("div.aatr_selectBox ").slideToggle()}),$("#js_cate_attr").length>0&&a(),$("#catePageList").on("click","a.pro_addToFavorite",function(t){var e=$(this),a=e.data("hasAddWids")||"",i=e.parents(".pro_inner").find(".warehouse-icon-wrap .selected").data("wearhoseId");i="_"+i+"_",-1==a.indexOf(i)&&(e.data("hasAddWids",a+i),GLOBAL.n_addTofavorite(e,e.data("src")),e.addClass("cur"))})}(),function(){function t(t,e){this.List=t,this.length=0,this.cookieVal=[],this.itemNum=4,this.WrapBox=e}t.prototype.firstWite=function(){this.WrapBox.children("div").length?this.WrapBox.is(":visible")?"":this.WrapBox.show():this.WrapBox.html(this.writeWrapHtml())},t.prototype.writeWrapHtml=function(){var t="";return t+='<header class="compare_hd"><i class="close gc_tagbg fr">x</i><h4>'+jsLg.compare+"</h4></header>",t+='<div id="goodsCompareList" class="compare_list"></div>',t+='<div class="compare_act" id="gcActPanel"><a href="javascript:javascript:void(0);" id="gcCompare" class="compare_sure" >'+jsLg.compare+"</a></div>"},t.prototype.writeGdsHtml=function(t){var e="",a=this.itemNum-t.length;$.each(t,function(t,a){var i=a.split("||");e+='<a href="'+i[3]+'" target="_blank" data-wid="'+i[4]+'" data-goodid="'+i[1]+'" class="compare_item"><img src="'+i[2]+'"><i class="compare_x gc_tagbg" uniqueKey="'+i[0]+'">×</i></a>',$("#js_ddToCo_"+i[0]).prop("checked",!0).parents("div.addToCompare").css("display","block"),$("#"+i[0]).data("compare","1")});for(var i=a-1;i>=0;i--)e+='<span class="compare_item"></span>';return e},t.prototype.readCookie=function(){var t="EOT",e=$.cookie("sysno");return e=e?e.split(t):""},t.prototype.addToCookie=function(t,e){var a="sysno",i="EOT",o=(t.split(i),this.readCookie());o=o.length?o.join(i)+i+t:t,$.cookie(a,o,{expires:null,path:"/",domain:COOKIESDIAMON}),$("#"+e).data("compare","0")},t.prototype.deletCookie=function(t){var e="sysno",a="EOT",i=this.readCookie();if(i){for(var o=i.length-1;o>=0;o--)if(i[o].indexOf(t)>-1){i.splice(o,1);break}$.cookie(e,i.join(a),{expires:null,path:"/",domain:COOKIESDIAMON}),$("#js_ddToCo_"+t).prop("checked",!1).parents("div.addToCompare").removeAttr("style"),$("#"+t).data("compare","0")}},t.prototype.clearAll=function(){$.each(this.WrapBox.find("i.compare_x"),function(t,e){var a=$(e).attr("uniqueKey");$("#js_ddToCo_"+a).prop("checked",!1).parents("div.addToCompare").removeAttr("style"),$("#"+a).data("compare","0")});var t="sysno";$.cookie(t,null,{expires:null,path:"/",domain:COOKIESDIAMON}),$("#goodsCompareList").html(this.writeGdsHtml(this.readCookie()))},t.prototype.ini=function(){var t=this;t.cookieVal=t.readCookie(),t.cookieVal.length&&(t.firstWite(),$("#goodsCompareList").html(t.writeGdsHtml(t.cookieVal))),t.List.on("change",".js_addToCompare",function(){var e=$(this),a=e.data("goodsid"),i=e.data("goodsimg"),o=e.data("url"),r=e.parents(".pro_inner").find(".warehouse-icon-wrap .selected").data("wearhoseId")||21,s=a+"_"+r;t.cookieVal=t.readCookie(),$(this).prop("checked")?t.cookieVal.length>=t.itemNum?($(this).prop("checked",!1),t.deletCookie(s),$.layer({type:4,shade:!1,time:2,closeBtn:[0,!1],maxWidth:200,tips:{msg:jsLg.compareTips2,guide:2,follow:this,isGuide:!0,style:["padding:2px 10px;background-color:#FF9900; color:#fff;","#FF9900"]}})):t.addToCookie(s+"||"+a+"||"+i+"||"+o+"||"+r,s):t.deletCookie(s),t.firstWite(),$("#goodsCompareList").html(t.writeGdsHtml(t.readCookie()))}),this.WrapBox.on("click","i.compare_x",function(){var e=$(this).attr("uniqueKey");return t.deletCookie(e),$("#goodsCompareList").html(t.writeGdsHtml(t.readCookie())),!1}),this.WrapBox.on("click","i.close",function(){t.clearAll(),t.WrapBox.hide()}),this.WrapBox.on("click","#gcCompare",function(){var e=[],a=[];$.each(t.WrapBox.find("a.compare_item"),function(t,i){var o=$(i);e[t]=o.data("goodid"),a[t]=o.data("wid")}),e.length<=1?$.layer({type:4,shade:!1,time:2,closeBtn:[0,!1],maxWidth:250,tips:{msg:jsLg.compareTips,guide:1,follow:t.WrapBox,isGuide:!0,style:["padding:2px 10px;background-color:#FF9900; color:#fff;","#FF9900"]}}):window.location.href="/compare-"+e.join("_")+"-"+a.join("_")})};var e=new t($("#catePageList"),$("#goodsCompareWindow"));e.ini()}(),function(){$(function(){function t(t,e){var a=document.createElement("a");if(a.href=t,"javascript:"==a.protocol)return t;if(-1!=a.search.indexOf("wid="))a.search=21==e?"":a.search.replace(/wid=\w*/,"wid="+e);else{a.search.length>0?"&":"?";a.search=21==e?"":a.search+"wid="+e}return a.href}$("a.contury-icon",".warehouse-icon-wrap").click(function(){var e=$(this);e.is(".selected"),e.addClass("selected"),e.parents("dd").siblings().find("a.contury-icon").removeClass("selected");var a=e.data("wearhoseId")||"21",i=e.parents(".pro_inner"),o=i.find(".all_proImg .cutOff_tag"),r=parseFloat(e.data("zhekou"));0==o.length&&i.find(".all_proImg").prepend('<span class="cutOff_tag"><strong></strong>%<i>'+jsLg.OFF+"</i></span>"),r?(i.find(".all_proImg .cutOff_tag strong").text(e.data("zhekou")),i.find(".all_proImg .cutOff_tag").show()):i.find(".all_proImg .cutOff_tag").hide();var s=i.find(".all_price .costPrice .my_shop_price");0==s.length&&(i.find(".all_price .costPrice").append('<span class="bizhong"></span><span class="my_shop_price" orgp=""></span>'),s=i.find(".costPrice .my_shop_price"));var n=e.data("marketPrice");s.attr("orgp",n).text(n),s.attr("data-orgp",n).text(n);var c=e.data("price");i.find(".all_price .new_shop_price").attr("orgp",c).text(c),i.find(".all_price .new_shop_price").attr("data-orgp",c).text(c),GLOBAL.currency.change_html(null,i),$("a",i).each(function(e,i){var o=$(this),r=o.prop("href");o.prop("href",t(r,a));var s=o.data("src");s&&o.data("src",t(s,a))})})})}(),function(){function changeWid(){var flagWrapArr=$(".js_flagWrap");$.each(flagWrapArr,function(t,e){var a=$(e).find(".contury-icon").eq(0);a.trigger("click")});var demoCountryObj=eval(COUNTRYDATAJSON).countryJsonData,isHaveSaveCountry=$.cookie("isSaveCountry")?$.cookie("isSaveCountry"):0,countryId=parseInt($.cookie("countryId")?$.cookie("countryId"):0);if(1!=isHaveSaveCountry||0===countryId)return!1;for(var i in demoCountryObj)if($.inArray(countryId,demoCountryObj[i].countryid)>-1){2===demoCountryObj[i].wid?($('a[data-wearhose-id="8"]').trigger("click"),$('a[data-wearhose-id="7"]').trigger("click"),$('a[data-wearhose-id="6"]').trigger("click"),$('a[data-wearhose-id="2"]').trigger("click")):$('a[data-wearhose-id="'+demoCountryObj[i].wid+'"]').trigger("click");break}}changeWid(),$(".js_saveCountryAndCurrency").click(function(){setTimeout(function(){changeWid()},1e3)})}(),function(){function t(){for(var t=new Object,e=location.search.substring(1),a=e.split("&"),i=0;i<a.length;i++){var o=a[i].indexOf("=");if(-1!=o){var r=a[i].substring(0,o),s=a[i].substring(o+1);t[r]=unescape(s)}}return t}var e=new Object;if(e=t(),void 0!=e.wid&&null!=e.wid){var a=e.wid,i=a.substring(0,2).replace("_",""),o=parseInt(i),r=$(".js_flagWrap");$.each(r,function(t,e){$('a[data-wearhose-id="'+o+'"]').trigger("click")})}}(),function(){if($(".js_flagWrap").length){var t=$(".js_flagWrap");t.flexslider({namespace:"",animation:"slide",selector:".sliderList > dd",pauseOnAction:!1,controlNav:!1,directionNav:!0,animationLoop:!0,slideshow:!1,itemWidth:35,minItems:4,maxItems:5}),$.each(t,function(t,e){var a=$(e),i=a.find(".sliderList dd").length;i>5?a.find(".direction-nav").show():a.find(".direction-nav").hide()})}}(),function(t){function e(t){var e=t.split(" ");return e[1]='<a href="/about/get-it-free.html" class="color067bb5">'+e[1]+"</a>",e.join(" ")}function a(e){var a,i=t(".friends_link"),o=(i.data("img"),650),r=500,s=(window.screen.availHeight-30-r)/2,n=(window.screen.availWidth-10-o)/2;switch(e.attr("data-stype")){case"faceBook":a=e.attr("data-href");break;case"Twitter":a=e.attr("data-href")+"&text="+e.attr("data-text");break;case"pinit":a=e.attr("data-href")+"&media="+e.attr("data-img")+"&description="+e.attr("data-text");break;case"google":a=e.attr("data-href")+"&t="+e.attr("data-text")}window.open(a,"","width="+o+",height="+r+",top="+s+",left="+n)}var i=t(".js-getItFreeBox");i.delegate("a.getItFree","click",function(){if(t.cookie("isLogin")&&t.cookie("isLogin").length>0){var i,o,r=t(this),s=r.closest("div"),n=s.find("img[name=imgurl]").attr("src"),c=s.find("p[class=all_proNam] a").text(),d=(s.find("span[class=bizhong]").text(),s.find("span[name=money]").eq(0).text()),l=(r.attr("data-href"),r.attr("data-goods-id"));t.ajax({url:"/"+JS_LANG+"m-users-a-get_share_link_ajax",type:"post",dataType:"",data:{goods_id:l},success:function(r){r=JSON.parse(r);var s="";0==r.status?(o=r.link_info,i=r.goods_info,s+='<div class="category_layer">',s+='<div class="img_info">',s+='<img src="'+n+'" />',s+="</div>",s+='<div class="content_wrap">',s+='<p class="goods_info color0 font16 fontb text-over mt10 height24">'+c+"</p>",s+='<p class="free_price mt5">',s+='<span class="free_price_label">'+jsLg.getItFree.free+": </span>",s+='<span class="my_shop_price new_shop_price">'+d.substring(0,d.indexOf(".")),s+="<i>"+d.substring(d.indexOf("."))+"</i>",s+="</span>",s+="</p>",s+='<p class="goods_info font14 text-over mt10 color999 height24">'+jsLg.getItFree.share+"</p>",s+='<div class="friends_link height50 pt10 pb10">',s+='<a class="facebook_icon height50" href="javascript:void(0)" fbdesc="'+i.goods_title+'" fbpicture="'+i.goods_thumb+'" fblink="'+i.url_title+'" data-href="https://www.facebook.com/sharer/sharer.php?u='+encodeURIComponent(o.link_url)+'" data-stype="faceBook" target="_blank"></a>',s+='<a class="twitter_icon height50" href="javascript:void(0)" data-href="https://twitter.com/share?url='+encodeURIComponent(o.link_url)+'" data-text="'+i.url_title+'" data-stype="Twitter" target="_blank"></a>',s+='<a class="google_icon height50" href="javascript:void(0)" data-stype="google" data-href="https://plus.google.com/share?url='+encodeURIComponent(o.link_url)+'" data-text="'+i.url_title+'" target="_blank"></a>',s+='<a class="pinterest_icon height50" href="javascript:void(0)" data-href="https://www.pinterest.com/pin/create/button/?url='+encodeURIComponent(o.link_url)+'" data-text="'+i.url_title+'" data-img="'+i.goods_grid+'" data-stype="pinit" target="_blank"></a>',s+="</div>",s+='<div class="pr">',s+='<input type="text" value="'+o.link_url+'" />',s+='<button class="copy_button ml10" type="button" data-linkUrl="'+o.link_url+'">'+jsLg.getItFree.copy+"</button>",s+='<span class="notice">Link copied.</span>',s+="</div>",s+='<p class="mt10 color0 font12">'+e(jsLg.getItFree.clickHere)+"</p>",s+="</div>",s+="</div>"):1==r.status&&(s+="<div class='category_layer'>",s+="<p class='thanks ta_c mt80'>"+r.msg+"</p>",s+="</div>");var l=t.layer({type:1,title:!1,closeBtn:[0,!0],area:["670px","277px"],border:[0],fix:!0,page:{html:s}});t(".friends_link").on("click","a",function(){a(t(this)),layer.close(l);var e="";return e+="<div class='category_layer'>",e+="<p class='thanks ta_c mt80'>THANKS FOR YOUR SHARING!</p>",e+="<p class='color999 font12 ta_c'>You can check your special link status in “ <a href='/my-shares.html' class='underline color999'>my share</a> ” .</p>",e+="</div>",t.layer({type:1,title:!1,closeBtn:[0,!0],area:["670px","277px"],border:[0],fix:!0,page:{html:e}}),!1}),t(".copy_button").zclip({path:JS_IMG_URL+"minjs/ZeroClipboard.swf",copy:function(){return t(this).attr("data-linkUrl")},afterCopy:function(){t(".notice").show().fadeOut(3e3)}})}})}else window.location.href=HTTPS_LOGIN_DOMAIN+"/"+JS_LANG+"m-users-a-sign.htm?ref="+window.location.href})}(jQuery);